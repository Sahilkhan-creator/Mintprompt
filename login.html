<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login | Signup</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
/* ===== SAME GLASS UI ===== */
*{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:Inter,sans-serif;
  background:linear-gradient(135deg,#667eea,#764ba2);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px
}
.login-container{width:100%;max-width:420px}
.login-card{
  background:rgba(255,255,255,.1);
  backdrop-filter:blur(20px);
  border:1px solid rgba(255,255,255,.2);
  border-radius:24px;
  padding:40px;
  color:#fff
}
.login-header{text-align:center;margin-bottom:32px}
.login-header h2{font-size:2rem}
.login-header p{opacity:.8}
.form-group{margin-bottom:24px}
.input-wrapper{position:relative}
.input-wrapper input{
  width:100%;
  padding:16px;
  border-radius:12px;
  background:rgba(255,255,255,.1);
  border:1px solid rgba(255,255,255,.2);
  color:#fff
}
.input-wrapper label{
  position:absolute;
  left:16px;
  top:16px;
  opacity:.7
}
.btn{
  width:100%;
  padding:16px;
  border-radius:12px;
  border:none;
  background:linear-gradient(135deg,#6366f1,#06b6d4);
  color:#fff;
  font-weight:600;
  cursor:pointer
}
.divider{text-align:center;margin:24px 0;opacity:.7}
.social-login{display:flex;gap:12px}
.social-btn{
  flex:1;
  padding:12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.1);
  color:#fff;
  cursor:pointer
}
.switch{text-align:center;margin-top:16px}
.switch a{color:#06b6d4;cursor:pointer}
.error{color:#ef4444;font-size:13px;margin-top:6px}
.success{display:none;text-align:center}
.hidden{display:none}
</style>
</head>

<body>

<div class="login-container">
<div class="login-card">

<div class="login-header">
<h2 id="title">Welcome Back</h2>
<p id="subtitle">Sign in to your account</p>
</div>

<!-- LOGIN FORM -->
<form id="loginForm">
  <div class="form-group">
    <div class="input-wrapper">
      <input type="email" id="loginEmail" required>
      <label>Email</label>
    </div>
  </div>

  <div class="form-group">
    <div class="input-wrapper">
      <input type="password" id="loginPassword" required>
      <label>Password</label>
    </div>
    <div class="error" id="loginError"></div>
  </div>

  <button class="btn">Sign In</button>
</form>

<!-- SIGNUP FORM -->
<form id="signupForm" class="hidden">
  <div class="form-group">
    <div class="input-wrapper">
      <input type="email" id="signupEmail" required>
      <label>Email</label>
    </div>
  </div>

  <div class="form-group">
    <div class="input-wrapper">
      <input type="password" id="signupPassword" required minlength="6">
      <label>Password</label>
    </div>
    <div class="error" id="signupError"></div>
  </div>

  <button class="btn">Create Account</button>
</form>

<div class="divider">or continue with</div>

<div class="social-login">
  <button class="social-btn" id="googleLogin">Google</button>
  <button class="social-btn" id="githubLogin">GitHub</button>
</div>

<div class="switch">
<p id="switchText">
Donâ€™t have an account? <a onclick="showSignup()">Sign up</a>
</p>
</div>

<div class="success" id="successBox">
<h3>Check your email ðŸ“©</h3>
<p>Please verify your email before logging in.</p>
</div>

</div>
</div>

<script>
/* ===== SUPABASE ===== */
const supabase = supabase.createClient(
  "https://zqdrycjtvmtygyyoqlld.supabase.co",
  "sb_publishable_QTzP8FpPofn9mrXtmPrgHQ_I16inQxm"
);

/* ===== TOGGLE UI ===== */
function showSignup(){
  loginForm.classList.add("hidden");
  signupForm.classList.remove("hidden");
  title.textContent="Create Account";
  subtitle.textContent="Sign up to get started";
  switchText.innerHTML=`Already have an account? <a onclick="showLogin()">Login</a>`;
}
function showLogin(){
  signupForm.classList.add("hidden");
  loginForm.classList.remove("hidden");
  title.textContent="Welcome Back";
  subtitle.textContent="Sign in to your account";
  switchText.innerHTML=`Donâ€™t have an account? <a onclick="showSignup()">Sign up</a>`;
}

/* ===== LOGIN ===== */
loginForm.onsubmit = async (e)=>{
  e.preventDefault();
  const { error } = await supabase.auth.signInWithPassword({
    email: loginEmail.value,
    password: loginPassword.value
  });
  if(error){ loginError.textContent = error.message; return; }
  location.href="/dashboard.html";
};

/* ===== SIGNUP (EMAIL VERIFY) ===== */
signupForm.onsubmit = async (e)=>{
  e.preventDefault();
  const { error } = await supabase.auth.signUp({
    email: signupEmail.value,
    password: signupPassword.value,
    options:{
      emailRedirectTo: location.origin + "/login.html"
    }
  });
  if(error){ signupError.textContent = error.message; return; }
  signupForm.classList.add("hidden");
  document.querySelector(".social-login").classList.add("hidden");
  document.querySelector(".divider").classList.add("hidden");
  document.querySelector(".switch").classList.add("hidden");
  successBox.style.display="block";
};

/* ===== OAUTH ===== */
googleLogin.onclick=()=>supabase.auth.signInWithOAuth({provider:"google"});
githubLogin.onclick=()=>supabase.auth.signInWithOAuth({provider:"github"});
</script>

</body>
    </html>
